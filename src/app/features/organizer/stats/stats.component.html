<div class="min-h-screen bg-slate-950 pt-24 pb-12">
  <div class="stats-container">
    
    <div class="flex items-center justify-between mb-8">
      <div class="flex items-center gap-4">
        <a routerLink="/organizer/dashboard" class="p-2 rounded-lg bg-slate-900 border border-slate-700 text-slate-400 hover:text-white transition-colors">
          <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
        </a>
        <h1 class="text-3xl font-bold text-white">Vos Statistiques</h1>
      </div>
      <div class="text-slate-400 text-sm">Donn√©es synchronis√©es en temps r√©el</div>
    </div>

    <div *ngIf="loading" class="flex justify-center py-20">
      <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div>
    </div>

    <div *ngIf="!loading">
      
      <!-- Summary Cards -->
      <div class="summary-cards">
        <div class="card">
          <p class="text-slate-400 text-sm font-medium mb-1">Revenus Totaux</p>
          <div class="text-3xl font-bold revenue-text">{{ summary.totalRevenue | number:'1.0-2' }} ü™ô</div>
          <p class="text-xs text-slate-500 mt-2">G√©n√©r√©s par les inscriptions</p>
        </div>
        <div class="card">
          <p class="text-slate-400 text-sm font-medium mb-1">Participants Totaux</p>
          <div class="text-3xl font-bold text-white">{{ summary.totalParticipants }}</div>
          <p class="text-xs text-slate-500 mt-2">Joueurs uniques sur vos tournois</p>
        </div>
        <div class="card">
          <p class="text-slate-400 text-sm font-medium mb-1">Taux de R√©ussite</p>
          <div class="text-3xl font-bold text-emerald-400">{{ summary.completionRate }}%</div>
          <div class="progress-bar-bg">
            <div class="progress-bar-fill" [style.width.%]="summary.completionRate"></div>
          </div>
        </div>
        <div class="card">
          <p class="text-slate-400 text-sm font-medium mb-1">Moy. Participants</p>
          <div class="text-3xl font-bold text-white">{{ summary.avgParticipants }}</div>
          <p class="text-xs text-slate-500 mt-2">Par tournoi cr√©√©</p>
        </div>
      </div>

      <!-- Charts/Detailed Data -->
      <div class="chart-section">
        
        <!-- Game Distribution -->
        <div class="card">
          <h2 class="text-lg font-bold text-white mb-6">R√©partition par Jeu</h2>
          <div class="space-y-6">
            <div *ngFor="let item of getGameDistribution()" class="space-y-2">
              <div class="flex justify-between items-center text-sm">
                <span class="text-slate-300 capitalize">{{ item.game.replace('_', ' ') }}</span>
                <span class="text-white font-bold">{{ item.count }} ({{ item.percentage }}%)</span>
              </div>
              <div class="progress-bar-bg">
                <div class="progress-bar-fill" [style.width.%]="item.percentage"></div>
              </div>
            </div>
            <div *ngIf="tournaments.length === 0" class="text-slate-500 text-center py-4">
              Aucune donn√©e √† afficher.
            </div>
          </div>
        </div>

        <!-- Latest Performance -->
        <div class="card">
          <h2 class="text-lg font-bold text-white mb-6">Engagement R√©cent</h2>
          <div class="space-y-4">
            <div *ngFor="let t of tournaments.slice(0, 5)" class="flex items-center justify-between p-3 rounded-xl bg-slate-800/30">
               <div>
                 <div class="text-white text-sm font-medium truncate max-w-[150px]">{{ t.name }}</div>
                 <div class="text-slate-500 text-xs">{{ t.start_date | date:'shortDate' }}</div>
               </div>
               <div class="text-right">
                 <div class="text-blue-400 text-sm font-bold">{{ t.current_participants || 0 }} Joueurs</div>
                 <div class="text-slate-500 text-xs">{{ ((t.current_participants || 0) / t.max_participants * 100) | number:'1.0-0' }}% Rempli</div>
               </div>
            </div>
          </div>
        </div>

      </div>

    </div>

  </div>
</div>
