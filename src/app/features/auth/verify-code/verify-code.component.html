<div class="min-h-screen flex items-center justify-center bg-slate-950 p-4 font-['Inter']">
  <div class="bg-slate-900/40 backdrop-blur-2xl p-8 lg:p-12 rounded-[2.5rem] shadow-2xl border border-white/5 text-center max-w-md w-full animate-fade-in relative overflow-hidden">
    
    <!-- Background Glow -->
    <div class="absolute -top-24 -left-24 w-48 h-48 bg-blue-600/20 blur-[100px] rounded-full"></div>
    <div class="absolute -bottom-24 -right-24 w-48 h-48 bg-purple-600/20 blur-[100px] rounded-full"></div>

    <div class="relative z-10">

        <h2 class="text-3xl font-black text-white mb-3 tracking-tight">Vérification</h2>
        <p class="text-slate-400 mb-10 text-sm leading-relaxed">
          Saisissez le code à 6 chiffres envoyé à<br>
          <span class="text-blue-400 font-bold">{{ email }}</span>
        </p>

        <!-- Code Input Group -->
        <div class="flex justify-between gap-2 mb-8">
            @for (digit of code; track $index) {
                <input 
                    type="text" 
                    maxlength="1" 
                    class="code-input w-12 h-14 lg:w-14 lg:h-16 bg-slate-950/50 border border-white/10 rounded-2xl text-center text-2xl font-black text-white focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all"
                    [(ngModel)]="code[$index]"
                    (input)="onInput($event, $index)"
                    (keydown)="onKeyDown($event, $index)"
                    [disabled]="loading || success"
                >
            }
        </div>

        <!-- Feedback Messages -->
        <div *ngIf="error" class="mb-6 p-4 bg-rose-500/10 border border-rose-500/20 rounded-2xl text-rose-400 text-sm font-medium animate-shake">
            {{ error }}
        </div>

        <div *ngIf="success" class="mb-6 p-4 bg-emerald-500/10 border border-emerald-500/20 rounded-2xl text-emerald-400 text-sm font-medium">
            Connexion réussie ! Redirection...
        </div>

        <!-- Footer Actions -->
        <div class="space-y-6">
            <button 
                (click)="verify()" 
                [disabled]="loading || success || code.join('').length < 6"
                class="w-full py-4 bg-blue-600 hover:bg-blue-500 disabled:opacity-50 disabled:hover:bg-blue-600 text-white rounded-2xl font-black text-sm uppercase tracking-widest transition-all shadow-lg shadow-blue-600/20 flex items-center justify-center gap-3"
            >
                <span *ngIf="loading" class="w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"></span>
                {{ loading ? 'Vérification...' : 'Confirmer le code' }}
            </button>

            <div class="text-slate-500 text-sm font-medium">
                Vous n'avez rien reçu ? 
                <button (click)="resendCode()" class="text-blue-400 hover:text-blue-300 font-bold transition-colors ml-1">
                    Renvoyer un code
                </button>
            </div>

            <a routerLink="/login" class="inline-flex items-center gap-2 text-slate-500 hover:text-white text-xs font-bold uppercase tracking-widest transition-colors group">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 group-hover:-translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                </svg>
                Retour
            </a>
        </div>
    </div>

  </div>
</div>
